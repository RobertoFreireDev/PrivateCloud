@page "/virtualdrive"

<div style="margin: 10px;">
    <MudStack AlignItems="AlignItems.Start" Spacing="2">
        <MudFileUpload T="IReadOnlyList<IBrowserFile>" FilesChanged="UploadFiles">
            <ActivatorContent>
                <MudButton Variant="Variant.Filled"
                Color="Color.Secondary"
                StartIcon="@Icons.Material.Filled.CloudUpload">
                </MudButton>
            </ActivatorContent>
        </MudFileUpload>
    </MudStack>
    <MudTable Items="files" Hover="true" Class="mt-4" Breakpoint="Breakpoint.SmAndDown">
        <RowTemplate>
            <MudTd Style="max-width: 250px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                @context.Name
            </MudTd>
            <MudTd>
                <MudIconButton Icon="@Icons.Material.Filled.Download"
                Color="Color.Primary"
                Variant="Variant.Filled"
                OnClick="@(() => DownloadFile(context))" />
                <MudIconButton Icon="@Icons.Material.Filled.Delete"
                Color="Color.Error"
                Variant="Variant.Outlined"
                Class="ml-2"
                OnClick="@(() => DeleteFile(context))" />
            </MudTd>
        </RowTemplate>
    </MudTable>
    @if (ErrorMessages.Count > 0)
    {
        foreach (var errorMessage in ErrorMessages)
        {
            <MudAlert Severity="Severity.Error" Class="mt-4">
                @errorMessage
            </MudAlert>
        }
    }
</div>